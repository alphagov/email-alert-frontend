<% content_for :title, "Get emails when pages are added or updated" %>

<% content_for :head do %>
  <meta name="robots" content="noindex, nofollow">
<% end %>

<% content_for :head_css do %>
  <%= stylesheet_link_tag "application-without-elements" %>
<% end %>

<%= render "govuk_component/breadcrumbs", breadcrumbs: @breadcrumbs %>

<%= render "govuk_publishing_components/components/back_link", {
  href: @back_url,
} %>

<div class="grid-row">
  <div class="column-two-thirds">

    <%= render partial: "govuk_component/title", locals: {
      title: "Get emails when pages are added or updated",
    } %>

    <%= form_tag subscription_frequency_path, method: :post do %>
      <%= hidden_field_tag :topic_id, @topic_id %>

      <div class="form-group">
        <% intro = capture do %>
          <h2>How often do you want to get updates?</h2>
          <p>You can get updates about changes:</p>
        <% end %>
        <% radio = capture do %>
          <%= render "govuk_publishing_components/components/radio", {
            name: "frequency",
            items: [
              {
                value: "immediately",
                text: "As soon as they happen",
                checked: true,
              },
              {
                value: "daily",
                text: "No more than once a day",
              },
              {
                value: "weekly",
                text: "No more than once a week",
              }
            ]
          } %>
        <% end %>

        <%# Note govspeak component is not used as it won't render a form and
            is thus not easy to test %>
        <div class="govuk-govspeak">
          <%= render "govuk_publishing_components/components/fieldset", {
            legend_text: intro,
            text: radio,
          } %>
        </div>
      </div>

      <div class="form-group">
        <%= render "govuk_component/button", {
          text: "Next",
          margin_bottom: true,
        } %>
      </div>
    <%- end -%>
  </div>
</div>
